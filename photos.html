---
layout: default
title: "相册"
---
<div id="folders" class="row"></div>
<script type="text/javascript">
    Array.prototype.removeAll = function() {
        var what, a = arguments, L = a.length, ax;
        while (L && this.length) {
            what = a[--L];
            while ((ax = this.indexOf(what)) !== -1) {
                this.splice(ax, 1);
            }
        }
        return this;
    }

    var imageFiles = [{% assign image_files = site.static_files | where: "photo", true %}{% for myimage in image_files %}{
        "path":"{{ myimage.path }}",
        "modified_time":"{{ myimage.modified_time }}"
    },{% endfor %}]

    var folders = {};

    for (var i = 0; i < imageFiles.length; i++) {
        var image = imageFiles[i];
        var pathArray = image.path.split("/").removeAll("");
        var folder = pathArray[1];
        image["folder"] = folder;
        if (folders[folder]) {
            folders[folder].push(image);
        } else {
            folders[folder] = [image];
        }
    }

    var folderNames = Object.keys(folders);
    for (var i = 0; i < folderNames.length; i++) {
        $("#folders").append(
            $("<div></div>").addClass("col-sm-6 col-md-4").append(
                $("<div></div>").addClass("thumbnail").append(
                    $("<img>").attr("src", folders[folderNames[i]][0].path)
                ).append(folderNames[i])
            )
        );
    }
</script>
